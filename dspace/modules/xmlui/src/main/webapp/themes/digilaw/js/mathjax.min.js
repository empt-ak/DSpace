
var Preview={delay:150,preview:null,buffer:null,input:null,timeout:null,mjRunning:false,oldText:null,Init:function(a){this.preview=document.getElementById(a.preview);this.buffer=document.getElementById(a.buffer);this.input=document.getElementById(a.input);return this},swapBuffers:function(){var a=this.preview,b=this.buffer;this.buffer=a;this.preview=b;a.style.visibility="hidden";a.style.position="absolute";b.style.position="";b.style.visibility=""},update:function(){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(this.callback,this.delay)},createPreview:function(){Preview.timeout=null;if(this.mjRunning){return}var a=this.input.value;if(a===this.oldtext){return}this.buffer.innerHTML=this.oldtext=a;this.mjRunning=true;MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.buffer],["previewDone",this])},previewDone:function(){this.mjRunning=false;this.swapBuffers()}};Preview.callback=MathJax.Callback(["createPreview",Preview]);Preview.callback.autoReset=true;